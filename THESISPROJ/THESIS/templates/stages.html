<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stages</title>
  <!-- Link to External CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/stages.css') }}" />
  <!-- Tailwind CSS (Optional) -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
  <div class="back">
    <a href="{{ url_for('roadmap') }}">
      <button class="back-btn"></button>
    </a>
  </div>

  <div class="main-wrapper">
    <div class="stages-content">
      <img src="{{ url_for('static', filename='images/stageimg/bg.png') }}" alt="stages" class="bg-img" />
    </div>
      <div class="map-wrapper">

      <div class="map-img">

      <div class="buttons">
        <button>
          <img src="{{ url_for('static', filename='images/stageimg/stage1.png') }}" alt="stage" class="stage s1" />
        </button>
        <button>
          <img src="{{ url_for('static', filename='images/stageimg/stage2.png') }}" alt="stage" class="stage s2" />
        </button>
        <button>
          <img src="{{ url_for('static', filename='images/stageimg/stage3.png') }}" alt="stage" class="stage s3" />
        </button>
      </div> 
      
      <div class="stars">
        <img src="{{ url_for('static', filename='images/stageimg/star-empty.png') }}" alt="star" class="star st1" />
        <img src="{{ url_for('static', filename='images/stageimg/star-empty.png') }}" alt="star" class="star st2" />
        <img src="{{ url_for('static', filename='images/stageimg/star-empty.png') }}" alt="star" class="star st3" />

      </div>

    
          
      </div>
      </div>
    </div>



    <script>
      const selectedMap = "{{ selected_map or '' }}";
    
      function goToStage(stageNumber) {
        if (selectedMap) {
          // Show loading screen
          const loadingOverlay = document.createElement('div');
          loadingOverlay.style.position = 'fixed';
          loadingOverlay.style.top = '0';
          loadingOverlay.style.left = '0';
          loadingOverlay.style.width = '100vw';
          loadingOverlay.style.height = '100vh';
          loadingOverlay.style.backgroundColor = 'rgba(0, 0, 0, 0.7)'; // Dim background
          loadingOverlay.style.display = 'flex';
          loadingOverlay.style.justifyContent = 'center';
          loadingOverlay.style.alignItems = 'center';
          loadingOverlay.style.color = '#fff';
          loadingOverlay.style.fontSize = '2rem';
          loadingOverlay.style.zIndex = '9999';
          loadingOverlay.innerText = 'Loading...';
    
          document.body.appendChild(loadingOverlay);
    
          // After 1 second, redirect to the game page
          setTimeout(() => {
            window.location.href = `/game?map=${selectedMap}&stage=${stageNumber}`;
          }, 1000); // 1000 milliseconds = 1 second
        } else {
          alert('No map selected.');
        }
      }
    
      // Attach event listeners to stage buttons
      document.querySelectorAll('.stage').forEach((stageImg, index) => {
        stageImg.addEventListener('click', () => {
          goToStage(index + 1); // index 0 => Stage 1, etc.
        });
      });
    
      // Change background image based on selectedMap
      const mapImgDiv = document.querySelector('.map-img');
      if (selectedMap && mapImgDiv) {
        const mapImages = {
          addition: "{{ url_for('static', filename='images/stageimg/addition-bg.png') }}",
          subtraction: "{{ url_for('static', filename='images/stageimg/subtraction-bg.png') }}",
          multiplication: "{{ url_for('static', filename='images/stageimg/multiplication-bg.png') }}",
          division: "{{ url_for('static', filename='images/stageimg/division-bg.png') }}",
          counting: "{{ url_for('static', filename='images/stageimg/counting-bg.png') }}",
          comparison: "{{ url_for('static', filename='images/stageimg/comparison-bg.png') }}",
          numerals: "{{ url_for('static', filename='images/stageimg/numerals-bg.png') }}",
          placevalue: "{{ url_for('static', filename='images/stageimg/placevalue-bg.png') }}"
        };
    
        if (mapImages[selectedMap]) {
          mapImgDiv.style.backgroundImage = `url('${mapImages[selectedMap]}')`;
          mapImgDiv.style.backgroundSize = 'cover';
          mapImgDiv.style.backgroundPosition = 'center';
        }
      }
    </script>
    
    

  </body>
  </html>











